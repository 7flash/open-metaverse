parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RXVx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initiateAudio=t,exports.removePeer=i;var e,n,o={iceServers:[{urls:"stun:openrelay.metered.ca:80"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}]};function t(o,t){e=t,(n=o).on("initReceive",function(e){console.log("INIT RECEIVE "+e),r(e,!1),n.emit("initSend",e)}),n.on("initSend",function(e){console.log("INIT SEND "+e),r(e,!0)}),n.on("removePeer",function(e){console.log("removing peer "+e),i(e)}),n.on("signal",function(n){e[n.socket_id].signal(n.signal)})}function r(t,r,i){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(i){var a=i;console.log("EOO"+a),e[t]=new SimplePeer({initiator:r,stream:a,config:o}),e[t].on("signal",function(e){n.emit("signal",{signal:e,socket_id:t})}),e[t].on("stream",function(e){console.log("Was here");var n=document.createElement("video");n.srcObject=e,n.id=t,n.playsinline=!1,n.autoplay=!0,n.className="vid",document.body.appendChild(n)}),window.toggleMute=function(){for(var e in console.log("Microphone has been toggled"),a.getAudioTracks())a.getAudioTracks()[e].enabled=!a.getAudioTracks()[e].enabled,muteButton.innerText=a.getAudioTracks()[e].enabled?"Unmuted":"Muted"}})}function i(n){var o=document.getElementById(n);o&&(o.srcObject.getTracks().forEach(function(e){e.stop()}),o.srcObject=null,o.parentNode.removeChild(o));e[n]&&e[n].destroy(),delete e[n]}
},{}],"mebo":[function(require,module,exports) {
"use strict";function e(e,t){e.otherPlayers=e.physics.add.group(),e.socket.on("currentPlayers",function(t){Object.keys(t).forEach(function(s){t[s].playerId===e.socket.id?a(e,t[s]):r(e,t[s])})}),e.socket.on("newPlayer",function(a){r(e,a)}),e.socket.on("playerMoved",function(a){e.otherPlayers.getChildren().forEach(function(e){a.playerId===e.playerId&&(e.setRotation(a.rotation),e.setPosition(a.x,a.y))})})}function a(e,a){e.sprite=e.physics.add.sprite(400,400,"characters",0).setSize(22,33).setOffset(23,27).setScale(.5);var r=e.add.sprite(400,400,"characters0",0).setSize(22,33);t(e),r.anims.play("hero-walk-down"),e.sprite.anims.play("player-walk-back"),e.cameras.main.startFollow(e.sprite,!0),e.cameras.main.setBounds(0,0,1e3,1e3)}function r(e,a){var r=e.add.sprite(a.x,a.y,"characters",0).setScale(.5);r.anims.play("player-walk"),r.playerId=a.playerId,e.otherPlayers.add(r)}function t(e){var a=e.anims;a.create({key:"hero-walk-down",frames:a.generateFrameNumbers("characters0",{start:0,end:2}),frameRate:8,repeat:-1})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializePlayersSocket=e;
},{}],"d6sW":[function(require,module,exports) {
"use strict";var e,t,a,s,i,r,o=require("./audioSocket"),n=require("./playerSocket"),d=null,h={},p={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,parent:"phaser-example",autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},physics:{default:"arcade",arcade:{debug:!1,gravity:{y:0}}},scene:{preload:l,create:y,update:u}},c=new Phaser.Game(p);function l(){for(var e=0;e<4;e++)this.load.spritesheet("characters".concat(e),"assets/Other/".concat(e,".png"),{frameWidth:32,frameHeight:32,margin:0,spacing:0});this.load.image("tiles","assets/tiles/indoors.png"),this.load.tilemapTiledJSON("dungeon","assets/tiles/mainmap.json"),this.load.spritesheet("characters","assets/characterSprite.png",{frameWidth:64,frameHeight:64,margin:1,spacing:2}),this.load.image("map","assets/mainMap.jpeg"),this.load.image("sprite","assets/spaceShips_001.png"),this.load.image("star","assets/star_gold.png"),t=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),a=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S),s=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),i=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D)}function y(){var t=this;this.cameras.main.setZoom(3);var a=document.createElement("div");a.className="button",a.innerText="muted",this.add.dom(100,100,a);var s=this.make.tilemap({key:"dungeon"}),i=s.addTilesetImage("indoors","tiles");s.createStaticLayer("background",i),s.createStaticLayer("structure",i);var r=this.anims;r.create({key:"player-walk",frames:r.generateFrameNumbers("characters",{start:46,end:49}),frameRate:16,repeat:-1}),r.create({key:"player-walk-back",frames:r.generateFrameNumbers("characters",{start:65,end:68}),frameRate:16,repeat:-1});this.socket=io("ws://localhost:3000"),e=this.socket,(0,o.initiateAudio)(e,h),(0,n.initializePlayersSocket)(this,h),e.on("disconnected",function(e){for(var a in console.log("disconnected"),t.otherPlayers.getChildren().forEach(function(t){e===t.playerId&&t.destroy()}),h)(0,o.removePeer)(a)})}var m=2;function u(){if(this.sprite){var e=this.sprite;t.isDown&&(e.y-=m),a.isDown&&(e.y+=m),s.isDown&&(e.x-=m,e.setFlipX(!0)),i.isDown&&(e.x+=m,e.setFlipX(!1)),s.isDown||i.isDown||a.isDown?e.anims.play("player-walk",!0):t.isDown?e.anims.play("player-walk-back",!0):e.anims.stop();var r=this.sprite.x,o=this.sprite.y,n=this.sprite.rotation;!this.sprite.oldPosition||r===this.sprite.oldPosition.x&&o===this.sprite.oldPosition.y&&n===this.sprite.oldPosition.rotation||this.socket.emit("playerMovement",{x:this.sprite.x,y:this.sprite.y,rotation:this.sprite.rotation}),this.sprite.oldPosition={x:this.sprite.x,y:this.sprite.y,rotation:this.sprite.rotation}}}
},{"./audioSocket":"RXVx","./playerSocket":"mebo"}]},{},["d6sW"], null)
//# sourceMappingURL=/main.1855f058.js.map